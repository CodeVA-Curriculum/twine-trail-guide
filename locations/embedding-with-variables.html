<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<!-- <link rel="icon" href="/favicon.png" /> -->
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<meta http-equiv="content-security-policy" content="">
		<link href="/twine-trail-guide/_app/immutable/assets/_layout-c8c62745.css" rel="stylesheet">
		<link href="/twine-trail-guide/_app/immutable/assets/Standalone-4970b9f1.css" rel="stylesheet">
		<link href="/twine-trail-guide/_app/immutable/assets/navigation-af927694.css" rel="stylesheet">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/start-7cf014b1.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/index-28147552.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/singletons-5295c163.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/paths-6cd3a76e.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/preload-helper-b21cceae.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/components/pages/_layout.svelte-863e6220.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/modules/pages/_layout.js-7b9cbfbc.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/_layout-8d2a742b.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/components/pages/locations/_layout.svelte-af266223.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/Nav-e2baa9e8.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/components/pages/locations/embedding-with-variables/_page.md-d06d4908.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/Standalone-e39bc1fe.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/Standalone.svelte_svelte_type_style_lang-17c44177.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/navigation-03af5729.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/index.es-30099b97.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/Aside-c5d6848f.js">
	</head>
	<body>
		<div id="svelte">


<nav class="navbar"><div class="navbar-brand logo"><a class="navbar-item" href="/twine-trail-guide/"><img alt="The CodeVA Logo" src="/twine-trail-guide/_app/immutable/assets/CodeVALogo-cdf06ed4.png" height="28">
            <p class="mx-3 heading is-size-5">+</p>
            <img alt="The Twine Logo" src="/twine-trail-guide/_app/immutable/assets/twine-b352c7c6.svg" height="28">
            <h1 class="heading is-size-5 ml-5 mt-1 is-hidden-mobile">Twine Trail Guide</h1></a>
        <button role="button" class="navbar-burger " aria-label="menu" aria-expanded="false" data-target="nav-menu"><span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span></button></div>
    <div id="nav-menu" class="navbar-menu "><div class="navbar-end"><a class="navbar-item" href="/twine-trail-guide/">Home
            </a>
            <a class="navbar-item" href="/twine-trail-guide/about">About the Guide
            </a>
            <a class="navbar-item" href="https://padlet.com/jonstapleton/wvs5vb5ct1s5kqts">Region Map
            </a>
            <a class="navbar-item" href="/twine-trail-guide/trails">Trails
            </a>
            <a class="navbar-item" href="/twine-trail-guide/locations">Locations
            </a></div></div></nav>
<div class="section"><div class="container"><div class="container"><section class="wrapper svelte-rs31xx"><div class="columns"><div class="column content"><h1 class="title">Embedding With Variables</h1>
                
                
                <blockquote class="block  is-italic">This tutorial covers some techniques that involve using embedded passages in conjunction with variables to create story systems. Embedding &amp; variables are powerful tools for organizing your stories, allowing you to group related features together into passages and re-use those passages across your story. This tutorial covers two techniques; using variable links in embedded passages, and using variables to control which passage the host passage embeds.</blockquote>
                <p class="block  svelte-rs31xx">Watch the video to see someone demonstrate the basics, or read on to work through it on your own. This concept is a part of several projects <a href="/twine-trail-guide/trails">Trails</a>; check them out!</p>
                </div>
            <div class="column my-3"><div class="video svelte-rs31xx"><iframe src="https://www.youtube.com/embed/VFjAVps7ILs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="svelte-rs31xx"></iframe></div></div></div></section>
    <hr class="svelte-rs31xx">
    <section class="content post post-container svelte-rs31xx"><p>This tutorial covers some techniques that involve using embedded passages in conjunction with variables to create story systems. Embedding &amp; variables are powerful tools for organizing your stories, allowing you to group related features together into passages and re-use those passages across your story. This tutorial covers two techniques; using variable links in embedded passages, and using variables to control which passage the host passage embeds.</p>
<aside class="card my-3 p-3 svelte-6gt5py"><div class="columns is-mobile is-vcentered"><div class="column is-narrow"><span><svg id="" class="fa svelte-1cj2gr0" style="height:1em;font-size:1.75em;vertical-align:-.125em;transform-origin:center;overflow:visible" viewBox="0 0 576 512" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><g transform="translate(288 256)" transform-origin="144 0"><g transform="translate(0,0) scale(1,1)"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z" fill="currentColor" transform="translate(-288 -256)"></path></g></g></svg></span></div>
        <div class="column"><p class="is-size-7"><p>This tutorial references concepts from the <a href="" rel="">Embedding Passages</a>, <a href="" rel="">Variable Basics</a>, and <a href="" rel="">Modifying Variables</a> tutorials. Consider checking those out if you get stuck in the material below!</p></p></div></div>
</aside>
<h2>Embedded Passage Variables</h2>
<p>Just like all other text elements in a passage, you can use variables to replace the embedded passage name in your <code>embed passage</code> element within a host passage. Using variables to have the computer “choose” between several different embedded passages allows you to create very dynamic stories which respond to events across passages. These sorts of stories can be complex—here’s an example.</p>
<p>Check out the story below: the <code>bonfire</code> passage describes a bonfire. Using variables and embedded passages, I can make it so the bonfire “burns down” as the user spends time “away” from the <code>bonfire</code> passage.</p>
<p>First, I’ll create the <code>intro</code> passage that sets up the variables, and then the <code>bonfire</code> passage with the bonfire and a link to another passage. Click through the tabs below to see the content of each passage:</p>
<article class="passage card my-5"><header class="card-header pl-5 pt-2 pb-0 svelte-1xrcq0x"><h4 class="svelte-1xrcq0x">Bonfire Embedded Passage Example</h4></header>
    
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-1xrcq0x">
                <div class="passage-pre has-tabs"></div></div>
        
            <div class="column has-text-centered m-0">

<div class="has-text-centered" style="margin-left: auto; margin-right: auto;"><figure class="image is-inline-block"><img alt="The output of the code above" src="/twine-trail-guide/images/bonfire-map.png" class="svelte-r75zci"></figure></div>


</div></div></div>
    <span style="display: none;"><pre class="language-intro"><!-- HTML_TAG_START --><code class="language-intro">fire: &#39;Roaring&#39;
--

&gt; [[Start the Story-&gt;bonfire]]</code><!-- HTML_TAG_END --></pre><pre class="language-bonfire"><!-- HTML_TAG_START --><code class="language-bonfire">You come across a campsite. In the center of the clearing, you see a place for a fire.

&#123;embed passage: fire&#125;

&gt; [[Search for Food-&gt;search]]</code><!-- HTML_TAG_END --></pre><pre class="language-search"><!-- HTML_TAG_START --><code class="language-search">Nothing here yet!</code><!-- HTML_TAG_END --></pre></span>
</article>
<p>You can see in the passages above that I’ve created a variable called <code>fire</code>. This variable will be the <strong>name of a passage</strong> containing a description of the fire. In future passages, I’ll have the computer modify the variable to point to different passages, thereby replacing the embedded passage at different points in the story. Before I move any further, I’ll create two different passages with descriptions of the bonfire: <code>roaring</code> and <code>dying</code>. I’m also going to add content to the <code>search</code> passage from before. Click through the tabs to check out each passage:</p>
<article class="passage card my-5"><header class="card-header pl-5 pt-2 pb-0 svelte-1xrcq0x"><h4 class="svelte-1xrcq0x">Fire Descriptions</h4></header>
    
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-1xrcq0x">
                <div class="passage-pre has-tabs"></div></div>
        
            </div></div>
    <span style="display: none;"><pre class="language-search"><!-- HTML_TAG_START --><code class="language-search">fire: &#39;Dying&#39;
--

You spend some time picking through the underbrush. You find a raspberry briar, and collect some berries to eat by the fire.

&gt; [[Return to the Fire-&gt;bonfire]]</code><!-- HTML_TAG_END --></pre><pre class="language-roaring"><!-- HTML_TAG_START --><code class="language-roaring">The fire is roaring, licking the stones placed around the logs. You can feel the heat tickling your face and hands, even from across the clearing.</code><!-- HTML_TAG_END --></pre><pre class="language-dying"><!-- HTML_TAG_START --><code class="language-dying">The fire sputters, sending sparks and ash into the air. A trail of white smoke filters through the branches overhead.</code><!-- HTML_TAG_END --></pre></span>
</article>
<p>The <code>search</code> passage now <em>modifies</em> the variable called <code>fire</code>, changing its value to <code>Dying</code>. Now, when the reader returns to the fire, the <code>bonfire</code> passage will reference the passage called <code>dying</code> rather than the passage called <code>roaring</code>. This will emphasize the time the reader has “spent” collecting berries nearby. Here’s the story map with all of the links in place:</p>
<p>

<div class="has-text-centered" style="margin-left: auto; margin-right: auto;"><figure class="image is-inline-block"><img alt="The Twine editor, showing the passages described above" src="/twine-trail-guide/images/bonfire-map.png" class="svelte-r75zci"></figure></div>


</p>
<article class="passage card my-5"><header class="card-header pl-5 pt-2 pb-0 svelte-1xrcq0x"><h4 class="svelte-1xrcq0x">The Bonfire</h4></header>
    
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-1xrcq0x">
                <div class="passage-pre has-tabs"></div></div>
        
            <div class="column has-text-centered m-0">

<div class="has-text-centered" style="margin-left: auto; margin-right: auto;"><figure class="image is-inline-block"><img alt="The output of the code above" src="/twine-trail-guide/images/bonfire-map.png" class="svelte-r75zci"></figure></div>


</div></div></div>
    <span style="display: none;"><pre class="language-intro"><!-- HTML_TAG_START --><code class="language-intro">fire: &#39;Roaring&#39;
--

&gt; [[Start the Story-&gt;bonfire]]</code><!-- HTML_TAG_END --></pre><pre class="language-bonfire"><!-- HTML_TAG_START --><code class="language-bonfire">You come across a campsite. In the center of the clearing, you see a place for a fire.

&#123;embed passage: fire&#125;

&gt; [[Search for Food-&gt;search]]</code><!-- HTML_TAG_END --></pre><pre class="language-search"><!-- HTML_TAG_START --><code class="language-search">fire: &#39;Dying&#39;
--

You spend some time picking through the underbrush. You find a raspberry briar, and collect some berries to eat by the fire.

&gt; [[Return to the Fire-&gt;bonfire]]</code><!-- HTML_TAG_END --></pre><pre class="language-roaring"><!-- HTML_TAG_START --><code class="language-roaring">The fire is roaring, licking the stones placed around the logs. You can feel the heat tickling your face and hands, even from across the clearing.</code><!-- HTML_TAG_END --></pre><pre class="language-dying"><!-- HTML_TAG_START --><code class="language-dying">The fire sputters, sending sparks and ash into the air. A trail of white smoke filters through the branches overhead.</code><!-- HTML_TAG_END --></pre></span>
</article>
<p>Try out the story for yourself by clicking <a href="" rel="">here</a>. There are lots of other creative ways to control embedded passages with variables—feel free to experiment!</p>
<hr>
<h2>Embedding &amp; Variable Links</h2>
<p>If you’ve read the <em><a href="" rel="">Embedding Passages</a></em> tutorial, you can start combining these concepts to create powerful systems that work together. For example, consider the story based on Edgar Allen Poe’s <em>The Raven</em> from the embedding tutorial:</p>
<p>

<div class="has-text-centered" style="margin-left: auto; margin-right: auto;"><figure class="image is-inline-block"><img alt="A Twine story editor with three passages: stanza1 is connected to stanza2, and both stanzas are connected to a passage called raven via dotted lines" src="/twine-trail-guide/images/the-raven-map.png" class="svelte-r75zci"></figure></div>


</p>
<p>In this story, I’ve embedded the passage named <code>raven</code> into all of the <code>stanza</code> passages. Each <code>stanza</code> passage has a link to the next part of the poem, allowing the reader to progress through the poem step-by-step. Here’s the <code>Stanza1</code> passage as an example:</p>
<article class="passage card my-5"><header class="card-header pl-5 pt-2 pb-0 svelte-1xrcq0x"><h4 class="svelte-1xrcq0x">The Poem</h4></header>
    
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-1xrcq0x">
                <div class="passage-pre has-tabs"></div></div>
        
            <div class="column has-text-centered m-0">

<div class="has-text-centered" style="margin-left: auto; margin-right: auto;"><figure class="image is-inline-block"><img alt="The output of the code above" src="/twine-trail-guide/images/new-raven-stanza1.png" class="svelte-r75zci"></figure></div>


</div></div></div>
    <span style="display: none;"><pre class="language-stanza1"><!-- HTML_TAG_START --><code class="language-stanza1">Then, methought, the air grew denser, perfumed from an unseen censer
Swung by Seraphim whose foot-falls tinkled on the tufted floor.
“Wretch,” I cried, “thy God hath lent thee—by these angels he hath sent thee
Respite—respite and nepenthe from thy memories of Lenore;
Quaff, oh quaff this kind nepenthe and forget this lost Lenore!”

&#123;embed passage: &#39;raven&#39;&#125;

&gt; [[Next-&gt;stanza2]]</code><!-- HTML_TAG_END --></pre><pre class="language-raven"><!-- HTML_TAG_START --><code class="language-raven">Quoth the Raven: &quot;Nevermore&quot;.</code><!-- HTML_TAG_END --></pre></span>
</article>
<p>Because the structure of the story is so consistent, I can change things up slightly and simplify the passages, moving the link into the <code>raven</code> passage. The first step is to add a variable to each <code>Stanza</code> passage, whose value is the name of the passage the <code>Stanza</code> should link to:</p>
<article class="passage card my-5"><header class="card-header pl-5 pt-2 pb-0 svelte-1xrcq0x"><h4 class="svelte-1xrcq0x">The Poem With Variable Embeds</h4></header>
    
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-1xrcq0x">
                <div class="passage-pre "></div></div>
        
            </div></div>
    <span style="display: none;"><pre class="language-stanza1"><!-- HTML_TAG_START --><code class="language-stanza1">next: &#39;stanza2&#39;
--

Then, methought, the air grew denser, perfumed from an unseen censer
Swung by Seraphim whose foot-falls tinkled on the tufted floor.
“Wretch,” I cried, “thy God hath lent thee—by these angels he hath sent thee
Respite—respite and nepenthe from thy memories of Lenore;
Quaff, oh quaff this kind nepenthe and forget this lost Lenore!”

&#123;embed passage: &#39;raven&#39;&#125;

&gt; [[Next-&gt;&#123;next&#125;]]</code><!-- HTML_TAG_END --></pre><pre class="language-stanza2"><!-- HTML_TAG_START --><code class="language-stanza2">Nothing here, for now</code><!-- HTML_TAG_END --></pre><pre class="language-raven"><!-- HTML_TAG_START --><code class="language-raven">Quoth the Raven: &quot;Nevermore&quot;.</code><!-- HTML_TAG_END --></pre></span>
</article>
<p>You can see above that I’ve inserted the value of the <code>next</code> variable into the link, just like I did in the <em>Goldilocks</em> example in the <em><a href="" rel="">Linking with Variables</a></em> tutorial. Now, I can move <em>remove</em> the link from <code>stanza1</code> and add it to the <code>raven</code> passage (remember: <em>all</em> passages have access to the variables):</p>
<article class="passage card my-5"><header class="card-header pl-5 pt-2 pb-0 svelte-1xrcq0x"><h4 class="svelte-1xrcq0x">The Poem, Decomposed</h4></header>
    
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-1xrcq0x">
                <div class="passage-pre "></div></div>
        
            </div></div>
    <span style="display: none;"><pre class="language-raven"><!-- HTML_TAG_START --><code class="language-raven">Quoth the Raven &quot;Nevermore&quot;.

&gt; [[Next-&gt;&#123;next&#125;]]</code><!-- HTML_TAG_END --></pre><pre class="language-stanza1"><!-- HTML_TAG_START --><code class="language-stanza1">next: &#39;stanza2&#39;
--

Then, methought, the air grew denser, perfumed from an unseen censer
Swung by Seraphim whose foot-falls tinkled on the tufted floor.
“Wretch,” I cried, “thy God hath lent thee—by these angels he hath sent thee
Respite—respite and nepenthe from thy memories of Lenore;
Quaff, oh quaff this kind nepenthe and forget this lost Lenore!”

&#123;embed passage: &#39;raven&#39;&#125;</code><!-- HTML_TAG_END --></pre><pre class="language-stanza2"><!-- HTML_TAG_START --><code class="language-stanza2">next: &quot;stanza1&quot;
--

Nothing here, for now

&#123;embed passage: &#39;raven&#39;&#125;</code><!-- HTML_TAG_END --></pre></span>
</article>
<p>Because the <code>raven</code> passage is responsible for the link, I can add all sorts of fancy features to make the embedded material more dramatic:</p>
<article class="passage card my-5"><header class="card-header pl-5 pt-2 pb-0 svelte-1xrcq0x"><h4 class="svelte-1xrcq0x">Raven (Fancy)</h4></header>
    
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-1xrcq0x">
                <div class="passage-pre "></div></div>
        
            <div class="column has-text-centered m-0">

<div class="has-text-centered" style="margin-left: auto; margin-right: auto;"><figure class="image is-inline-block"><img alt="The output of the code above" src="/twine-trail-guide/images/raven-delay-embed-demo.gif" class="svelte-r75zci"></figure></div>


</div></div></div>
    <span style="display: none;"><pre class="language-raven"><!-- HTML_TAG_START --><code class="language-raven">Quoth the Raven...

[after 5 seconds]
[[&quot;Nevermore&quot;. -&gt; &#123;next&#125;]]</code><!-- HTML_TAG_END --></pre><pre class="language-stanza1"><!-- HTML_TAG_START --><code class="language-stanza1">next: &#39;stanza2&#39;
--

Then, methought, the air grew denser, perfumed from an unseen censer
Swung by Seraphim whose foot-falls tinkled on the tufted floor.
“Wretch,” I cried, “thy God hath lent thee—by these angels he hath sent thee
Respite—respite and nepenthe from thy memories of Lenore;
Quaff, oh quaff this kind nepenthe and forget this lost Lenore!”

&#123;embed passage: &#39;raven&#39;&#125;</code><!-- HTML_TAG_END --></pre><pre class="language-stanza2"><!-- HTML_TAG_START --><code class="language-stanza2">next: &quot;stanza1&quot;
--

Nothing here, for now

&#123;embed passage: &#39;raven&#39;&#125;</code><!-- HTML_TAG_END --></pre></span>
</article>
<p>You can try out the new version of <em>The Raven</em> by clicking <a href="" rel="">here</a>. If you’d like to download it and play around with it in the Twine editor, click <a href="" rel="nofollow">here</a>. There are lots of other creative ways to use variables and links—don’t be afraid to experiment!</p>
<hr></section>
    
</div></div></div>


		<script type="module" data-sveltekit-hydrate="1p5q8my">
			import { start } from "/twine-trail-guide/_app/immutable/start-7cf014b1.js";

			start({
				env: {},
				hydrate: {
					status: 200,
					error: null,
					node_ids: [0, 2, 16],
					params: {},
					route: {"id":"/locations/embedding-with-variables"},
					data: [null,null,null],
					form: null
				},
				paths: {"base":"/twine-trail-guide","assets":"/twine-trail-guide"},
				target: document.querySelector('[data-sveltekit-hydrate="1p5q8my"]').parentNode,
				version: "1692978824799"
			});
		</script>
	</div>
	</body>
</html>
