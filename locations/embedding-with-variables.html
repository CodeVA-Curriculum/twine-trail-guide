<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<!-- <link rel="icon" href="/favicon.png" /> -->
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<meta http-equiv="content-security-policy" content="">
		<link href="/twine-trail-guide/_app/immutable/assets/_layout-9c41bba0.css" rel="stylesheet">
		<link href="/twine-trail-guide/_app/immutable/assets/Standalone-fb8ba4ca.css" rel="stylesheet">
		<link href="/twine-trail-guide/_app/immutable/assets/navigation-af927694.css" rel="stylesheet">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/start-f4273e50.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/index-7d48f659.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/singletons-6542c9d1.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/paths-6cd3a76e.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/preload-helper-b21cceae.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/components/pages/_layout.svelte-9adfaf16.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/modules/pages/_layout.js-7b9cbfbc.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/_layout-8d2a742b.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/components/pages/locations/_layout.svelte-8bdd78cc.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/Nav-c1d45359.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/components/pages/locations/embedding-with-variables/_page.md-b257fb0b.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/Standalone-fc81574c.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/Standalone.svelte_svelte_type_style_lang-a0abaa99.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/navigation-208b7d2c.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/Aside-f54dbaad.js">
		<link rel="modulepreload" href="/twine-trail-guide/_app/immutable/chunks/index.es-b01730d6.js">
	</head>
	<body>
		<div id="svelte">


<nav class="navbar"><div class="navbar-brand logo"><a class="navbar-item" href="/twine-trail-guide/"><img alt="The CodeVA Logo" src="/twine-trail-guide/_app/immutable/assets/CodeVALogo-cdf06ed4.png" height="28">
            <p class="mx-3 heading is-size-5">+</p>
            <img alt="The Twine Logo" src="/twine-trail-guide/_app/immutable/assets/twine-b352c7c6.svg" height="28">
            <h1 class="heading is-size-5 ml-5 mt-1 is-hidden-mobile">Twine Trail Guide</h1></a>
        <button role="button" class="navbar-burger " aria-label="menu" aria-expanded="false" data-target="nav-menu"><span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span></button></div>
    <div id="nav-menu" class="navbar-menu "><div class="navbar-end"><a class="navbar-item" href="/twine-trail-guide/">Home
            </a>
            <a class="navbar-item" href="/twine-trail-guide/about">About the Guide
            </a>
            <a class="navbar-item" href="https://padlet.com/jonstapleton/wvs5vb5ct1s5kqts">Region Map
            </a>
            <a class="navbar-item" href="/twine-trail-guide/trails">Trails
            </a>
            <a class="navbar-item" href="/twine-trail-guide/locations">Locations
            </a></div></div></nav>
<div class="container"><section class="wrapper svelte-16we498"><div class="columns"><div class="column mb-5"><h1 class="title">Embedding With Variables</h1>
                
                <p class="block">This tutorial covers some techniques that involve using embedded passages in conjunction with variables to create story systems. Embedding &amp; variables are powerful tools for organizing your stories, allowing you to group related features together into passages and re-use those passages across your story. This tutorial covers two techniques; using variable links in embedded passages, and using variables to control which passage the host passage embeds.</p>
                
                </div>
            </div>
        <hr></section>
    <section class="content post post-container svelte-16we498"><aside class="card is- p-3 svelte-6gt5py"><div class="columns is-mobile is-vcentered"><div class="column is-narrow"><span><svg id="" class="fa svelte-1cj2gr0" style="height:1em;font-size:1.75em;vertical-align:-.125em;transform-origin:center;overflow:visible" viewBox="0 0 576 512" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><g transform="translate(288 256)" transform-origin="144 0"><g transform="translate(0,0) scale(1,1)"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z" fill="currentColor" transform="translate(-288 -256)"></path></g></g></svg></span></div>
        <div class="column"><p class="is-size-7"><p>This tutorial references concepts from the <a href="" rel="">Embedding Passages</a>, <a href="" rel="">Variable Basics</a>, and <a href="" rel="">Modifying Variables</a> tutorials. Consider checking those out if you get stuck in the material below!</p></p></div></div>
</aside>
<h2>Embedded Passage Variables</h2>
<p>Just like all other text elements in a passage, you can use variables to replace the embedded passage name in your <code>embed passage</code> element within a host passage. Using variables to have the computer “choose” between several different embedded passages allows you to create very dynamic stories which respond to events across passages. These sorts of stories can be complex—here’s an example.</p>
<p>Check out the story below: the <code>Bonfire</code> passage describes a bonfire. Using variables and embedded passages, I can make it so the bonfire “burns down” as the user spends time “away” from the <code>Bonfire</code> passage.</p>
<p>

<div style="margin-left: auto; margin-right: auto;"><figure class="image is-inline-block"><img alt="The Twine editor, showing the passages described below" src="/twine-trail-guide/images/bonfire-map.png" class="svelte-r75zci"></figure></div>


</p>
<p>First, I’ll create the <code>Intro</code> passage that sets up the variables, and then the <code>Bonfire</code> passage with the bonfire and a link to another passage:</p>
<article class="card my-5"><header class="card-header pl-5 pt-2 pb-0"><h4>Intro</h4></header>
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-rhhsq4"><pre class="language-undefined"><!-- HTML_TAG_START --><code class="language-undefined">fire: &#39;Roaring&#39;
--

&gt; [[Start the Story-&gt;Bonfire]]</code><!-- HTML_TAG_END --></pre></div>
            </div></div>
</article>
<article class="card my-5"><header class="card-header pl-5 pt-2 pb-0"><h4>Bonfire</h4></header>
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-rhhsq4"><pre class="language-undefined"><!-- HTML_TAG_START --><code class="language-undefined">You come across a campsite. In the center of the clearing, you see a place for a fire.

&#123;embed passage: fire&#125;

&gt; [[Search for Food]]</code><!-- HTML_TAG_END --></pre></div>
            </div></div>
</article>
<p>You can see in the passages above that I’ve created a variable called <code>fire</code>. This variable will be the <strong>name of a passage</strong> containing a description of the fire. In future passages, I’ll have the computer modify the variable to point to different passages, thereby replacing the embedded passage at different points in the story. Before I move any further, I’ll create two different passages with descriptions of the bonfire: <code>Roaring</code> and <code>Dying</code>. Here’s <code>Roaring</code> as an example:</p>
<article class="card my-5"><header class="card-header pl-5 pt-2 pb-0"><h4>Roaring</h4></header>
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-rhhsq4"><pre class="language-undefined"><!-- HTML_TAG_START --><code class="language-undefined">The fire is roaring, licking the stones placed around the logs. You can feel the heat tickling your face and hands, even from across the clearing.</code><!-- HTML_TAG_END --></pre></div>
            </div></div>
</article>
<p><code>Dying</code> contains a similar description of a fire that is going out. I’ve also made a <code>Search for Food</code> passage, which looks like this:</p>
<article class="card my-5"><header class="card-header pl-5 pt-2 pb-0"><h4>Search for Food</h4></header>
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-rhhsq4"><pre class="language-undefined"><!-- HTML_TAG_START --><code class="language-undefined">fire: &#39;Dying&#39;
--

You spend some time picking through the underbrush. You find a raspberry briar, and collect some berries to eat by the fire.

&gt; [[Return to the Fire-&gt;Bonfire]]</code><!-- HTML_TAG_END --></pre></div>
            </div></div>
</article>
<p>The <code>Search for Food</code> passage <em>modifies</em> the variable called <code>fire</code>, changing its value to <code>Dying</code>. Now, when the reader returns to the fire, the <code>Bonfire</code> passage will host the passage called <code>Dying</code> rather than the passage called <code>Roaring</code>. This will emphasize the time the reader has “spent” collecting berries nearby. Here’s the story map with all of the links in place:</p>
<p>

<div style="margin-left: auto; margin-right: auto;"><figure class="image is-inline-block"><img alt="The Twine editor, showing the passages described above" src="/twine-trail-guide/images/bonfire-map.png" class="svelte-r75zci"></figure></div>


</p>
<p>Try out the story for yourself by clicking <a href="" rel="">here</a>. There are lots of other creative ways to control embedded passages with variables—feel free to experiment!</p>
<h2>Embedding &amp; Variable Links</h2>
<p>If you’ve read the <em><a href="" rel="">Embedding Passages</a></em> tutorial, you can start combining these concepts to create powerful systems that work together. For example, consider the story based on Edgar Allen Poe’s <em>The Raven</em> from the embedding tutorial:</p>
<p>

<div style="margin-left: auto; margin-right: auto;"><figure class="image is-inline-block"><img alt="A Twine story editor with three passages: Stanza1 is connected to Stanza2, and both stanzas are connected to a passage called Raven via dotted lines" src="/twine-trail-guide/images/the-raven-map.png" class="svelte-r75zci"></figure></div>


</p>
<p>In this story, I’ve embedded the passage named <code>Raven</code> into all of the <code>Stanza</code> passages. Each <code>Stanza</code> passage has a link to the next part of the poem, allowing the reader to progress through the poem step-by-step. Here’s the <code>Stanza1</code> passage as an example:</p>
<article class="card my-5"><header class="card-header pl-5 pt-2 pb-0"><h4>Stanza1</h4></header>
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-rhhsq4"><pre class="language-undefined"><!-- HTML_TAG_START --><code class="language-undefined">Then, methought, the air grew denser, perfumed from an unseen censer
Swung by Seraphim whose foot-falls tinkled on the tufted floor.
“Wretch,” I cried, “thy God hath lent thee—by these angels he hath sent thee
Respite—respite and nepenthe from thy memories of Lenore;
Quaff, oh quaff this kind nepenthe and forget this lost Lenore!”

&#123;embed passage: &#39;Raven&#39;&#125;

&gt; [[Next -&gt; Stanza2]]</code><!-- HTML_TAG_END --></pre></div>
            <div class="column has-text-centered m-0">

<div style="margin-left: auto; margin-right: auto;"><figure class="image is-inline-block"><img alt="The output of the code above" src="/twine-trail-guide/images/new-raven-stanza1.png" class="svelte-r75zci"></figure></div>


</div></div></div>
</article>
<p>Because the structure of the story is so consistent, I can change things up slightly and simplify the passages, moving the link into the <code>Raven</code> passage. The first step is to add a variable to each <code>Stanza</code> passage, whose value is the name of the passage the <code>Stanza</code> should link to:</p>
<article class="card my-5"><header class="card-header pl-5 pt-2 pb-0"><h4>Stanza1</h4></header>
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-rhhsq4"><pre class="language-undefined"><!-- HTML_TAG_START --><code class="language-undefined">next: &#39;Stanza2&#39;
--

Then, methought, the air grew denser, perfumed from an unseen censer
Swung by Seraphim whose foot-falls tinkled on the tufted floor.
“Wretch,” I cried, “thy God hath lent thee—by these angels he hath sent thee
Respite—respite and nepenthe from thy memories of Lenore;
Quaff, oh quaff this kind nepenthe and forget this lost Lenore!”

&#123;embed passage: &#39;Raven&#39;&#125;

&gt; [[Next -&gt; &#123;next&#125;]]</code><!-- HTML_TAG_END --></pre></div>
            </div></div>
</article>
<p>You can see above that I’ve inserted the value of the <code>next</code> variable into the link, just like I did in the <em>Goldilocks</em> example in the <em><a href="" rel="">Linking with Variables</a></em> tutorial. Now, I can move <em>remove</em> the link from <code>Stanza1</code> and add it to the <code>Raven</code> passage (remember: <em>all</em> passages have access to the variables):</p>
<article class="card my-5"><header class="card-header pl-5 pt-2 pb-0"><h4>Raven</h4></header>
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-rhhsq4"><pre class="language-undefined"><!-- HTML_TAG_START --><code class="language-undefined">Quoth the Raven &quot;Nevermore&quot;.

&gt; [[Next -&gt; &#123;next&#125;]]</code><!-- HTML_TAG_END --></pre></div>
            </div></div>
</article>
<p>Because the <code>Raven</code> passage is responsible for the link, I can add all sorts of fancy features to make the embedded material more dramatic:</p>
<article class="card my-5"><header class="card-header pl-5 pt-2 pb-0"><h4>Raven (Fancy)</h4></header>
    <div class="card-content"><div class="columns is-tablet"><div class="code column m-0 svelte-rhhsq4"><pre class="language-undefined"><!-- HTML_TAG_START --><code class="language-undefined">Quoth the Raven...

[after 15 seconds]
[[&quot;Nevermore&quot;. -&gt; &#123;next&#125;]]</code><!-- HTML_TAG_END --></pre></div>
            <div class="column has-text-centered m-0">

<div style="margin-left: auto; margin-right: auto;"><figure class="image is-inline-block"><img alt="The output of the code above" src="/twine-trail-guide/images/new-raven-map.png" class="svelte-r75zci"></figure></div>


</div></div></div>
</article>
<p>You can try out the new version of <em>The Raven</em> by clicking <a href="" rel="">here</a>. If you’d like to download it and play around with it in the Twine editor, click <a href="" rel="nofollow">here</a>. There are lots of other creative ways to use variables and links—don’t be afraid to experiment!</p>
<hr></section>
</div>


		<script type="module" data-sveltekit-hydrate="pp4eln">
			import { start } from "/twine-trail-guide/_app/immutable/start-f4273e50.js";

			start({
				env: {},
				hydrate: {
					status: 200,
					error: null,
					node_ids: [0, 2, 14],
					params: {},
					route: {"id":"/locations/embedding-with-variables"},
					data: [null,null,null],
					form: null
				},
				paths: {"base":"/twine-trail-guide","assets":"/twine-trail-guide"},
				target: document.querySelector('[data-sveltekit-hydrate="pp4eln"]').parentNode,
				version: "1669151237562"
			});
		</script>
	</div>
	</body>
</html>
